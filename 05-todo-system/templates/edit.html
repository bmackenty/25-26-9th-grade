{% extends "base.html" %}

{% block title %}Edit Todo - Todo Manager{% endblock %}

{% block content %}
<div class="bg-white rounded-lg shadow-md p-6">
  <div class="mb-6">
    <h2 class="text-2xl font-bold text-gray-900">Edit Todo</h2>
    <p class="text-gray-600">Update the details of your todo item.</p>
  </div>

  {% if error %}
    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
      {{ error }}
    </div>
  {% endif %}

  <form method="POST" class="space-y-6">
    <!-- Title -->
    <div>
      <label for="title" class="block text-sm font-medium text-gray-700 mb-2">
        Title <span class="text-red-500">*</span>
      </label>
      <input type="text" 
             id="title" 
             name="title" 
             required
             value="{{ todo['title'] }}"
             class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
             placeholder="Enter todo title">
    </div>

    <!-- Description -->
    <div>
      <label for="description" class="block text-sm font-medium text-gray-700 mb-2">
        Description
      </label>
      <textarea id="description" 
                name="description" 
                rows="3"
                class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
                placeholder="Enter todo description (optional)">{{ todo['description'] or '' }}</textarea>
    </div>

    <!-- Category and Priority Row -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Category -->
      <div>
        <label for="category" class="block text-sm font-medium text-gray-700 mb-2">
          Category
        </label>
        <select id="category" 
                name="category"
                class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500">
          <option value="General" {% if todo['category'] == 'General' %}selected{% endif %}>General</option>
          <option value="Work" {% if todo['category'] == 'Work' %}selected{% endif %}>Work</option>
          <option value="Personal" {% if todo['category'] == 'Personal' %}selected{% endif %}>Personal</option>
          <option value="School" {% if todo['category'] == 'School' %}selected{% endif %}>School</option>
          <option value="Health" {% if todo['category'] == 'Health' %}selected{% endif %}>Health</option>
          <option value="Finance" {% if todo['category'] == 'Finance' %}selected{% endif %}>Finance</option>
          <option value="Shopping" {% if todo['category'] == 'Shopping' %}selected{% endif %}>Shopping</option>
          <option value="Home" {% if todo['category'] == 'Home' %}selected{% endif %}>Home</option>
        </select>
      </div>

      <!-- Priority -->
      <div>
        <label for="priority" class="block text-sm font-medium text-gray-700 mb-2">
          Priority
        </label>
        <select id="priority" 
                name="priority"
                class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500">
          <option value="Low" {% if todo['priority'] == 'Low' %}selected{% endif %}>Low</option>
          <option value="Medium" {% if todo['priority'] == 'Medium' %}selected{% endif %}>Medium</option>
          <option value="High" {% if todo['priority'] == 'High' %}selected{% endif %}>High</option>
        </select>
      </div>
    </div>

    <!-- Tags and Due Date Row -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Tags -->
      <div>
        <label for="tags" class="block text-sm font-medium text-gray-700 mb-2">
          Tags
        </label>
        <input type="text" 
               id="tags" 
               name="tags" 
               value="{{ todo['tags'] or '' }}"
               class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
               placeholder="Enter tags separated by commas">
        <p class="text-xs text-gray-500 mt-1">Example: urgent, project, meeting</p>
      </div>

      <!-- Due Date -->
      <div>
        <label for="due_date" class="block text-sm font-medium text-gray-700 mb-2">
          Due Date
        </label>
        <input type="date" 
               id="due_date" 
               name="due_date" 
               value="{{ todo['due_date'] or '' }}"
               class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500">
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="flex justify-end space-x-4 pt-6 border-t border-gray-200">
      <a href="{{ url_for('index') }}" 
         class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
        Cancel
      </a>
      <button type="submit" 
              class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
        Update Todo
      </button>
    </div>
  </form>
</div>
{% endblock %}
